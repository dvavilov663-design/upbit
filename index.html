<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upbit Exchange</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .modal { display: none; position: fixed; z-index: 50; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); align-items: center; justify-content: center; }
    .modal-content { background: #ffffff; padding: 2rem; border-radius: 1rem; max-width: 500px; width: 100%; color: #0f172a; }
    body.light { background: #f8fafc; color: #0f172a; }
    body.light header, body.light footer, body.light .card { background: #fff !important; color: #0f172a !important; }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-950 via-blue-900 to-blue-800 text-white flex flex-col min-h-screen font-sans">

  <!-- Header -->
  <header class="flex flex-col md:flex-row md:justify-between md:items-center px-4 md:px-8 py-4 bg-blue-900 border-b border-blue-700 gap-4 md:gap-0">
    <h1 class="text-2xl md:text-3xl font-bold text-blue-300 tracking-wide">Ubbit</h1>
    <nav class="flex flex-wrap gap-4 text-gray-200 font-medium">
      <a href="#" class="hover:text-blue-300 transition">–¢–æ—Ä–≥–∏</a>
      <a href="#" class="hover:text-blue-300 transition" onclick="openConverter()">–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è</a>
      <a href="#" class="hover:text-blue-300 transition">–ö–æ—à–µ–ª–µ–∫</a>
      <a href="#" class="hover:text-blue-300 transition">–ü—Ä–æ—Ñ–∏–ª—å</a>
    </nav>
    <div class="flex items-center gap-4">
      <div class="text-gray-200 font-semibold text-sm md:text-base">üí∞ –ë–∞–ª–∞–Ω—Å: <span id="balance">10000</span> USDT</div>
      <button onclick="toggleTheme()" class="px-3 py-1 rounded-md border border-blue-400 text-sm bg-blue-800 hover:bg-blue-700 transition">üåô/‚òÄÔ∏è</button>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-1 grid grid-cols-1 lg:grid-cols-12 gap-4 p-4">

    <!-- Pairs on the left -->
    <div class="lg:col-span-3 card bg-blue-900 rounded-2xl shadow-lg p-4 border border-blue-700 overflow-y-auto max-h-[calc(100vh-160px)]">
      <h2 class="text-lg md:text-xl font-semibold mb-4 text-blue-300">üî• –í—Å–µ –ø–∞—Ä—ã Binance</h2>
      <table id="pairsTable" class="w-full text-left text-gray-200 text-xs md:text-sm">
        <thead class="uppercase text-xs text-gray-400 sticky top-0 bg-blue-900">
          <tr class="border-b border-blue-700">
            <th class="py-2">–ü–∞—Ä–∞</th>
            <th class="py-2">–¶–µ–Ω–∞</th>
            <th class="py-2">24—á</th>
          </tr>
        </thead>
        <tbody id="pairsBody"></tbody>
      </table>
    </div>

    <!-- Chart in the center -->
    <div class="lg:col-span-6 card bg-blue-900 rounded-2xl shadow-lg p-4 border border-blue-700 flex flex-col">
      <h2 class="text-lg md:text-2xl font-semibold mb-4 text-blue-300">üìà –ì—Ä–∞—Ñ–∏–∫</h2>
      <iframe id="tradingview_iframe" src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:BTCUSDT&interval=60&theme=dark&style=1&locale=ru"
        style="width:100%; height:600px;" frameborder="0" allowtransparency="true" scrolling="no"></iframe>
    </div>

    <!-- Right column with top assets -->
    <div class="lg:col-span-3 card bg-blue-900 rounded-2xl shadow-lg p-4 border border-blue-700 overflow-y-auto max-h-[calc(100vh-160px)]">
      <h2 class="text-lg md:text-xl font-semibold mb-4 text-blue-300">üèÜ –¢–æ–ø –∞–∫—Ç–∏–≤—ã</h2>
      <div id="topAssets" class="space-y-3 text-sm md:text-base"></div>
    </div>

  </main>

  <!-- Modal Converter -->
  <div id="converterModal" class="modal flex">
    <div class="modal-content w-[90%] md:w-auto">
      <h2 class="text-xl md:text-2xl font-semibold mb-6 text-blue-600">üí± –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è</h2>
      <form class="space-y-5">
        <div>
          <label class="text-sm text-gray-600">–ò–∑</label>
          <select id="fromCurrency" class="w-full mt-1 p-3 bg-gray-100 rounded-lg border border-gray-300"></select>
        </div>
        <div>
          <label class="text-sm text-gray-600">–í</label>
          <select id="toCurrency" class="w-full mt-1 p-3 bg-gray-100 rounded-lg border border-gray-300"></select>
        </div>
        <div>
          <label class="text-sm text-gray-600">–°—É–º–º–∞</label>
          <input type="number" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" class="w-full mt-1 p-3 rounded-lg bg-gray-100 border border-gray-300" />
        </div>
        <div class="flex flex-col md:flex-row gap-4">
          <button type="button" class="flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-semibold text-lg">–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
          <button type="button" onclick="closeConverter()" class="flex-1 py-3 bg-gray-400 hover:bg-gray-300 text-black rounded-xl font-semibold text-lg">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-blue-900 border-t border-blue-700 text-gray-300 text-center py-6 text-sm md:text-base">
    <p>&copy; 2025 Ubbit. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    <div class="flex justify-center gap-6 mt-3 text-gray-400 text-xs md:text-sm">
      <a href="#" class="hover:text-blue-300 transition">–û –Ω–∞—Å</a>
      <a href="#" class="hover:text-blue-300 transition">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>
      <a href="#" class="hover:text-blue-300 transition">API</a>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    let balance = 10000;
    document.getElementById('balance').innerText = balance;

    async function loadPairs() {
      const res = await fetch('https://api.binance.com/api/v3/ticker/24hr');
      const data = await res.json();
      const tbody = document.getElementById('pairsBody');
      const fromSelect = document.getElementById('fromCurrency');
      const toSelect = document.getElementById('toCurrency');
      const topAssetsDiv = document.getElementById('topAssets');
      tbody.innerHTML = '';
      topAssetsDiv.innerHTML = '';

      const usdtPairs = data.filter(item => item.symbol.endsWith('USDT'));
      usdtPairs.forEach((item, i) => {
        const tr = document.createElement('tr');
        tr.className = 'hover:bg-blue-800/50 transition cursor-pointer';
        tr.innerHTML = `
          <td class='py-2 font-medium text-blue-300' onclick="loadTradingView('${item.symbol}')">${item.symbol}</td>
          <td class='py-2'>${parseFloat(item.lastPrice).toFixed(4)}</td>
          <td class='py-2 ${item.priceChangePercent >= 0 ? 'text-green-400' : 'text-red-400'}'>${item.priceChangePercent}%</td>
        `;
        tbody.appendChild(tr);

        if (i < 10) {
          const div = document.createElement('div');
          div.className = 'flex justify-between border-b border-blue-700 pb-1';
          div.innerHTML = `
            <span class='text-blue-300 font-medium'>${item.symbol}</span>
            <span>${parseFloat(item.lastPrice).toFixed(2)}</span>
            <span class='${item.priceChangePercent >= 0 ? 'text-green-400' : 'text-red-400'}'>${item.priceChangePercent}%</span>
          `;
          topAssetsDiv.appendChild(div);
        }

        let opt1 = document.createElement('option');
        opt1.value = item.symbol.replace('USDT','');
        opt1.text = item.symbol.replace('USDT','');
        fromSelect.appendChild(opt1.cloneNode(true));
        toSelect.appendChild(opt1);
      });
    }

    function loadTradingView(symbol){
      const theme = document.body.classList.contains('light') ? 'light' : 'dark';
      const iframe = document.getElementById('tradingview_iframe');
      iframe.src = `https://s.tradingview.com/widgetembed/?symbol=BINANCE:${symbol}&interval=60&theme=${theme}&style=1&locale=ru`;
    }

    function openConverter(){ document.getElementById('converterModal').style.display = 'flex'; }
    function closeConverter(){ document.getElementById('converterModal').style.display = 'none'; }

    function toggleTheme(){
      document.body.classList.toggle('light');
      const iframe = document.getElementById('tradingview_iframe');
      let currentSrc = iframe.src;
      if(currentSrc.includes('theme=dark')){
        iframe.src = currentSrc.replace('theme=dark','theme=light');
      } else {
        iframe.src = currentSrc.replace('theme=light','theme=dark');
      }
    }

    loadPairs();
  </script>

</body>
</html>
